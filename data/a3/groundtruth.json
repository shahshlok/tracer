[
    {
        "id": "FLO-01",
        "category": "Control Flow",
        "misconception_name": "Off-by-One Loop Bound",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q1", "Q4"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student uses the wrong comparison operator in the loop condition (`<` when `<=` is needed, or vice versa), causing one too few or too many iterations.",
        "student_thinking": "\"I want 5 numbers, so I loop while i < 5. That gives me 0,1,2,3,4 which is 5 iterations. But I started i at 1, so it's only 4 iterations... close enough?\"",
        "instructions": {
            "Q1": "Start loop counter at 1: `for (int i = 1; i < 5; i++)`. This gives only 4 iterations (1,2,3,4) instead of 5. Read and sum evens for only 4 numbers.",
            "Q4": "Use `for (int row = 1; row < height; row++)` instead of `row <= height`. This prints height-1 rows instead of height rows."
        }
    },
    {
        "id": "FLO-02",
        "category": "Control Flow",
        "misconception_name": "Infinite Loop (Missing Update)",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q2"],
        "error_class": "Runtime-Hang",
        "misconception_explanation": "The student forgets to update the loop control variable or re-read user input inside the while loop body, causing an infinite loop.",
        "student_thinking": "\"I check if guess != answer at the top of the while. If it's wrong, I print a hint. Then the loop goes back to check again... and it will ask for a new guess, right? The loop handles that.\"",
        "instructions": {
            "Q2": "Read the guess ONCE before the while loop. Inside the loop body, print 'Too high' or 'Too low' but do NOT call scanner.nextInt() again. The loop condition uses the same old guess value forever."
        }
    },
    {
        "id": "FLO-03",
        "category": "Control Flow",
        "misconception_name": "Accumulator Reset Inside Loop",
        "grading_topics": ["Loops", "Variables"],
        "applicable_questions": ["Q1"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student resets the accumulator variable inside the loop body instead of initializing it once before the loop. This is a variant of the classic Rainfall Problem misconception.",
        "student_thinking": "\"I need sum to start at 0. I'll make sure it's 0 right before I add to it, just to be safe. That way there's no garbage value.\"",
        "instructions": {
            "Q1": "Inside the for loop, declare `int sum = 0;` right before `sum += num;`. The sum gets reset to 0 on every iteration, so the final result is only the last even number (or 0 if the last number was odd)."
        }
    },
    {
        "id": "LOG-01",
        "category": "Boolean Logic",
        "misconception_name": "Assignment in Condition",
        "grading_topics": ["Conditionals", "Variables"],
        "applicable_questions": ["Q2", "Q3"],
        "error_class": "Compile-Warning-Logic",
        "misconception_explanation": "The student uses the assignment operator `=` instead of the equality operator `==` in an if condition. In Java, this often causes a compile error for non-boolean types, but the student's mental model is still broken.",
        "student_thinking": "\"If guess equals answer... I write `if (guess = answer)`. The single equals means 'is equal to' just like in math class.\"",
        "instructions": {
            "Q2": "Write `if (guess = answer)` instead of `if (guess == answer)`. This will cause a compile error in Java (int cannot be converted to boolean), which is the misconception manifesting.",
            "Q3": "Write `if (grade = 90)` instead of `if (grade >= 90)`. Compile error."
        }
    },
    {
        "id": "LOG-02",
        "category": "Boolean Logic",
        "misconception_name": "Boundary Condition Error",
        "grading_topics": ["Conditionals"],
        "applicable_questions": ["Q3"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student uses strict inequality (`>` or `<`) instead of non-strict (`>=` or `<=`) at grade boundaries, causing edge cases to fall into the wrong category.",
        "student_thinking": "\"A grade is 90 to 100. So I check if grade > 90 for A. Wait, what about exactly 90? Eh, it's close enough to a B anyway.\"",
        "instructions": {
            "Q3": "Use `if (grade > 90)` instead of `if (grade >= 90)`. A score of exactly 90 incorrectly receives a B. Similarly use `> 80` for B, etc."
        }
    },
    {
        "id": "LOG-03",
        "category": "Boolean Logic",
        "misconception_name": "Overlapping Conditions (No else-if)",
        "grading_topics": ["Conditionals"],
        "applicable_questions": ["Q3"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student uses separate independent if statements instead of an else-if chain. Multiple conditions can match, especially when using only lower bounds (`>= 90`, `>= 80`, etc.).",
        "student_thinking": "\"I'll check each grade range with its own if statement. That way each condition is independent and clear. Nice and organized!\"",
        "instructions": {
            "Q3": "Use separate `if` statements without `else`: `if (grade >= 90) print A; if (grade >= 80) print B; if (grade >= 70) print C;` etc. A grade of 95 prints A, B, C, and D."
        }
    },
    {
        "id": "LOG-04",
        "category": "Boolean Logic",
        "misconception_name": "Dangling Else",
        "grading_topics": ["Conditionals"],
        "applicable_questions": ["Q3"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student omits curly braces around multi-statement if bodies or nested ifs. The else keyword binds to the nearest if, not the one the student intended. CRITICAL: The indentation must MISLEAD the reader to make this a valid test.",
        "student_thinking": "\"I don't need braces for single statements. The else clearly goes with the outer if because of how I indented it. The computer reads indentation like Python, right?\"",
        "instructions": {
            "Q3": "Write nested if WITHOUT braces and WITH MISLEADING INDENTATION: `if (grade >= 60)\\n    if (grade >= 70)\\n        System.out.println(\\\"C or above\\\");\\nelse\\n    System.out.println(\\\"F\\\");` The else LOOKS like it belongs to the outer if (grade >= 60) but actually attaches to the inner if (grade >= 70). A grade of 65 prints nothing instead of F."
        }
    },
    {
        "id": "NES-01",
        "category": "Nested Loops",
        "misconception_name": "Wrong Loop Variable in Inner Loop",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q4"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student accidentally uses the outer loop variable in the inner loop's increment or condition, causing incorrect behavior or infinite loops.",
        "student_thinking": "\"The inner loop prints stars. I need j to go from 0 to the current row number i... `for(int j=0; j<i; i++)`. Oops, I typed i++ instead of j++. But it still compiles so it's probably fine.\"",
        "instructions": {
            "Q4": "Write `for (int j = 0; j < row; row++)` instead of `j++`. The outer variable `row` gets incremented instead of `j`, causing the inner loop to terminate immediately (j is always less than an ever-increasing row) but the outer loop behavior changes unpredictably."
        }
    },
    {
        "id": "NES-02",
        "category": "Nested Loops",
        "misconception_name": "Outer Variable Modified in Inner Loop",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q4"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student accidentally modifies the outer loop's control variable inside the inner loop, causing the outer loop to skip iterations or terminate early.",
        "student_thinking": "\"I need to reset something after printing each row. I'll just set row = 0 to start fresh... wait, that's the outer loop variable.\"",
        "instructions": {
            "Q4": "Inside the inner loop or after it, accidentally modify the outer loop variable: `row = 1;` or `row--;`. This causes the outer loop to repeat the same row forever or terminate unexpectedly."
        }
    },
    {
        "id": "FLO-04",
        "category": "Control Flow",
        "misconception_name": "Break vs Continue Confusion",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q1", "Q2"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student confuses `break` (exit loop entirely) with `continue` (skip to next iteration). They use one when they meant the other.",
        "student_thinking": "\"If the number is odd, I don't want to add it. I'll just `break` to skip it and move on to the next number.\"",
        "instructions": {
            "Q1": "When checking if a number is odd, use `break;` instead of `continue;`. The loop terminates on the first odd number instead of skipping it.",
            "Q2": "After a correct guess, use `continue;` instead of `break;`. The game never ends because the loop continues instead of exiting."
        }
    }
]
